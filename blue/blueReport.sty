% blue.sty
% Style file for my blue report format
% Author: Peter Ashcroft, ETH Zurich

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{blue}[2018/09/13 Style file for my blue report format]

%------------------------
%% Required packages
%------------------------

% Adjust the page margins with geometry
\RequirePackage[top=2cm,bottom=2cm,left=2cm,right=2cm]{geometry}
% Colour
\RequirePackage{xcolor}
% Modify section headings etc.
\RequirePackage{titlesec}
% Figures
\RequirePackage{graphicx}
% Headers and footers
\RequirePackage{fancyhdr}
% Logical constructs
\RequirePackage{ifthen}
% Size calculations
\RequirePackage{calc}
% Symbols for phone, email, and webpage
\RequirePackage{marvosym}
% Citations
\RequirePackage{cite}

\ProcessOptions\relax

%------------------------
%% Style definitions
%------------------------
% Sans-serif font
\renewcommand{\familydefault}{\sfdefault}
% Colours
\definecolor{color0}{rgb}{0,0,0} % black
\definecolor{color1}{rgb}{0.22,0.45,0.70} % light blue
\definecolor{color2}{rgb}{0.45,0.45,0.45} % dark grey
\normalfont\color{color0}

% Title, section, subsection, etc. fonts
\titleformat{\section}[hang]{\LARGE\color{color1}}{\parbox[t]{0.1\textwidth}{\raisebox{0.1em}{\color{color1}\rule{0.1\textwidth}{0.5ex}}}~~\thesection.}{0.5em}{}
\titleformat{name=\section,numberless}[hang]{\LARGE\color{color1}}{\parbox[t]{0.1\textwidth}{\raisebox{0.2em}{\color{color1}\rule{0.1\textwidth}{0.5ex}}}~~}{0.5em}{}
\titleformat*{\subsection}{\Large\color{color1}}
\titleformat*{\subsubsection}{\large\color{color2}}

% Custom styles for title, name, and address
\newcommand{\titlestyle}[1]{{\Huge\mdseries\upshape\color{color0}{#1}}}
\newcommand{\subtitlestyle}[1]{{\LARGE\upshape\color{color2}{#1}}}
\newcommand{\addressstyle}[1]{{\small\upshape\color{color2}{#1}}}

% Title box style
\newcommand{\maketitlebox}{%
	% Box of author details
	\newbox{\authorbox}%
	\savebox{\authorbox}{%
		\addressstyle{%
		\begin{tabular}[t]{@{}r@{}}%
			{\bfseries\@name}%
			\ifthenelse{\isundefined{\@addressone}}{}{\\\@addressone%
			\ifthenelse{\equal{\@addresstwo}{}}{}{\\\@addresstwo}%
			\ifthenelse{\equal{\@addressthree}{}}{}{\\\@addressthree}}%
			\ifthenelse{\isundefined{\@phone}}{}{\\\phonesymbol\@phone}%
			\ifthenelse{\isundefined{\@email}}{}{\\\emailsymbol\@email}%
 			\ifthenelse{\isundefined{\@homepage}}{}{\\\homepagesymbol\@homepage}%
    		\end{tabular}%
    		}%
	}%
	% Width of author details
	\newlength{\authorboxwidth}\settowidth{\authorboxwidth}{\usebox{\authorbox}}%
	%
	% Title and subtitle
	% Define width
    \newlength{\titleboxwidth}\setlength{\titleboxwidth}{\textwidth-\authorboxwidth-30pt}%
    %
    \noindent%
	\begin{minipage}[t]{\titleboxwidth}%
		\ifthenelse{\equal{\@title}{}}{}{\titlestyle{\@title}}%
		\ifthenelse{\equal{\@subtitle}{}}{}{\\[1.25em]\subtitlestyle{\@subtitle}}%
	\end{minipage}%
	\hfill%
	\usebox{\authorbox}%
}%

% Elements
\newcommand*{\name}[1]{\def\@name{#1}}
\renewcommand*{\title}[1]{\def\@title{#1}}
\newcommand*{\subtitle}[1]{\def\@subtitle{#1}}
\newcommand*{\address}[3]{\def\@addressone{#1}\def\@addresstwo{#2}\def\@addressthree{#3}}
\newcommand*{\phone}[1]{\def\@phone{#1}}
\newcommand*{\email}[1]{\def\@email{#1}}
\newcommand*{\homepage}[1]{\def\@homepage{#1}}

% Symbols
\newcommand*{\marvosymbol}[1]{{\fontfamily{mvs}\fontencoding{U}\fontseries{m}\fontshape{n}\selectfont\char#1}}
\newcommand*{\phonesymbol}{\marvosymbol{72}~}
\newcommand*{\emailsymbol}{\marvosymbol{66}~}
\newcommand*{\homepagesymbol}{{\Large\marvosymbol{205}}~}


\endinput
